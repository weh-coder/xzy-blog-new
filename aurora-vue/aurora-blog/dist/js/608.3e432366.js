"use strict";(self["webpackChunkaurora_blog"]=self["webpackChunkaurora_blog"]||[]).push([[608],{3283:function(e,t,a){a.r(t),a.d(t,{default:function(){return we}});var l=a(73396),i=a(87139),r=a(49242);const c=e=>((0,l.dD)("data-v-1bab5c42"),e=e(),(0,l.Cn)(),e),s={class:"flex flex-col"},n={class:"main-grid"},o={class:"post-header"},d={class:"post-labels"},m={key:1},p={key:2},u=c((()=>(0,l._)("em",{class:"opacity-50"},"#",-1))),g={key:2},h=c((()=>(0,l._)("b",{class:"opacity-50"},"#",-1))),w={key:0,class:"post-title text-white"},y={class:"flex flex-row items-center justify-start mt-8 mb-4"},v={key:0,class:"post-footer"},f={class:"text-white opacity-80"},x={class:"pl-2 opacity-70"},k={key:1,class:"post-footer"},C={class:"flex flex-row items-center"},b={class:"text-ob-dim mt-1"},_={key:2,class:"post-stats"},D={class:"pl-2 opacity-70"},T={class:"pl-2 opacity-70"},A={style:{width:"1.5em",height:"1.5em",display:"inline-block",stroke:"rgba(255, 255, 255, var(--tw-text-opacity))"},class:"svg-icon","aria-hidden":"true","data-v-c8a70580":"","data-v-7b23b1e6":""},N=c((()=>(0,l._)("use",{href:"#icon-message","data-v-c8a70580":""},null,-1))),W=[N],z={class:"pl-2 opacity-70"},I={key:3,class:"post-stats"},M={class:"pl-2"},Z={class:"pl-2"},S={class:"main-grid"},j={key:0,class:"post-html"},R=["innerHTML"],F={key:1,class:"bg-ob-deep-800 px-14 py-16 rounded-2xl shadow-xl block min-h-screen"},H=c((()=>(0,l._)("br",null,null,-1))),E=c((()=>(0,l._)("br",null,null,-1))),P=c((()=>(0,l._)("br",null,null,-1))),q={class:"flex flex-col lg:flex-row justify-start items-end my-8 my-gap"},B={key:0,class:"w-full h-full self-stretch mr-0 lg:mr-4"},J={key:1,class:"w-full h-full self-stretch mt-0"},L={id:"sticky-sidebar"},O={class:"sidebar-box mb-4"},Y=c((()=>(0,l._)("div",{id:"toc1"},null,-1)));function U(e,t,a,c,N,U){const $=(0,l.up)("ob-skeleton"),K=(0,l.up)("svg-icon"),Q=(0,l.up)("SubTitle"),G=(0,l.up)("ArticleCard"),V=(0,l.up)("Comment"),X=(0,l.up)("Profile"),ee=(0,l.up)("Navigator"),te=(0,l.up)("Sticky"),ae=(0,l.up)("Sidebar"),le=(0,l.Q2)("lazy");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("span",d,[e.loading?((0,l.wg)(),(0,l.j4)($,{key:0,tag:"b",height:"20px",width:"35px"})):!e.loading&&e.article.categoryName?((0,l.wg)(),(0,l.iD)("b",m,[(0,l._)("span",null,(0,i.zw)(e.article.categoryName),1)])):((0,l.wg)(),(0,l.iD)("b",p,(0,i.zw)(e.t("settings.default-category")),1)),(0,l._)("ul",null,[e.loading?((0,l.wg)(),(0,l.j4)($,{key:0,count:2,tag:"li",height:"16px",width:"35px",class:"mr-2"})):!e.loading&&e.article.tags&&e.article.tags.length>0?((0,l.wg)(!0),(0,l.iD)(l.HY,{key:1},(0,l.Ko)(e.article.tags,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[u,(0,l.Uk)(" "+(0,i.zw)(e.tagName),1)])))),128)):((0,l.wg)(),(0,l.iD)("li",g,[h,(0,l.Uk)(" "+(0,i.zw)(e.t("settings.default-tag")),1)]))])]),e.article.articleTitle?((0,l.wg)(),(0,l.iD)("h1",w,(0,i.zw)(e.article.articleTitle),1)):((0,l.wg)(),(0,l.j4)($,{key:1,class:"post-title text-white uppercase",width:"100%",height:"clamp(1.2rem, calc(1rem + 3.5vw), 4rem)"})),(0,l._)("div",y,[e.article.author?((0,l.wg)(),(0,l.iD)("div",v,[(0,l.wy)((0,l._)("img",{class:"hover:opacity-50 cursor-pointer",alt:"author avatar",onClick:t[0]||(t[0]=t=>e.handleAuthorClick(e.article.author.website))},null,512),[[le,e.article.author.avatar||""]]),(0,l._)("span",f,[(0,l._)("strong",{class:"text-white pr-1.5 hover:opacity-50 cursor-pointer",onClick:t[1]||(t[1]=t=>e.handleAuthorClick(e.article.author.website))},(0,i.zw)(e.article.author.nickname),1),(0,l.Uk)(" "+(0,i.zw)(e.t("settings.shared-on"))+" ",1),(0,l._)("span",x,(0,i.zw)(new Date(e.article.createTime).getFullYear())+" "+(0,i.zw)(e.t(`settings.months[${new Date(e.article.createTime).getMonth()}]`))+" "+(0,i.zw)(new Date(e.article.createTime).getDate())+", "+(0,i.zw)(e.formatTime(e.article.createTime)),1)])])):((0,l.wg)(),(0,l.iD)("div",k,[(0,l._)("div",C,[(0,l.Wm)($,{class:"mr-2",height:"28px",width:"28px",circle:!0}),(0,l._)("span",b,[(0,l.Wm)($,{height:"20px",width:"150px"})])])])),""!==e.wordNum&&""!==e.readTime?((0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("span",null,[(0,l.Wm)(K,{"icon-class":"text-outline",style:{stroke:"white"}}),(0,l._)("span",D,(0,i.zw)(e.wordNum),1)]),(0,l._)("span",null,[(0,l.Wm)(K,{"icon-class":"clock-outline",style:{stroke:"white"}}),(0,l._)("span",T,(0,i.zw)(e.readTime),1)]),(0,l._)("span",null,[((0,l.wg)(),(0,l.iD)("svg",A,W)),(0,l._)("span",z,(0,i.zw)(e.commentNum),1)])])):((0,l.wg)(),(0,l.iD)("div",I,[(0,l._)("span",null,[(0,l.Wm)(K,{"icon-class":"clock"}),(0,l._)("span",M,[(0,l.Wm)($,{width:"40px",height:"16px"})])]),(0,l._)("span",null,[(0,l.Wm)(K,{"icon-class":"text"}),(0,l._)("span",Z,[(0,l.Wm)($,{width:"40px",height:"16px"})])])]))])])]),(0,l._)("div",S,[(0,l._)("div",null,[e.article.articleContent?((0,l.wg)(),(0,l.iD)("div",j,[(0,l._)("div",{class:"markdown-body",ref:"articleRef",innerHTML:e.article.articleContent},null,8,R)])):((0,l.wg)(),(0,l.iD)("div",F,[(0,l.Wm)($,{tag:"div",count:1,height:"36px",width:"150px",class:"mb-6"}),H,(0,l.Wm)($,{tag:"div",count:35,height:"16px",width:"100px",class:"mr-2"}),E,P,(0,l.Wm)($,{tag:"div",count:25,height:"16px",width:"100px",class:"mr-2"})])),(0,l._)("div",q,[e.preArticleCard?((0,l.wg)(),(0,l.iD)("div",B,[(0,l.Wm)(Q,{title:"settings.paginator.pre",icon:"arrow-left-circle"}),(0,l.Wm)(G,{class:"pre-and-next-article",data:e.preArticleCard},null,8,["data"])])):(0,l.kq)("",!0),e.nextArticleCard?((0,l.wg)(),(0,l.iD)("div",J,[(0,l.Wm)(Q,{title:"settings.paginator.next",side:e.isMobile?"left":"right",icon:"arrow-right-circle"},null,8,["side"]),(0,l.Wm)(G,{class:"pre-and-next-article",data:e.nextArticleCard},null,8,["data"])])):(0,l.kq)("",!0)]),(0,l.Wm)(V)]),(0,l._)("div",null,[(0,l.Wm)(ae,null,{default:(0,l.w5)((()=>[(0,l.Wm)(X),(0,l.Wm)(te,{stickyTop:32,endingElId:"footer",dynamicElClass:"#sticky-sidebar"},{default:(0,l.w5)((()=>[(0,l._)("div",L,[(0,l.Wm)(r.uT,{name:"fade-slide-y",mode:"out-in"},{default:(0,l.w5)((()=>[(0,l._)("div",O,[(0,l.Wm)(Q,{title:"titles.toc",icon:"toc"},null,8,["title"]),Y])])),_:1}),(0,l.Wm)(ee)])])),_:1})])),_:1})])])])}var $=a(28242),K=a(44870),Q=a(22483),G=a(35213),V=a(85926),X=a(50913),ee=a(11711),te=a(45466),ae=a(17437),le=a(62069),ie=a(2549),re=a.n(ie),ce=(a(79525),a(33731),a(77372),a(61678),a(3275),a(28781),a(51973),a(61739),a(70714),a(8072),a(9688),a(64121),a(80077),a(23456),a(43774)),se=a.n(ce),ne=a(13184),oe=a(36883),de=a(73286),me=a(69622),pe=a(49252),ue=(0,l.aZ)({name:"Article",components:{Sidebar:$.YE,Comment:V.s,SubTitle:X.D,ArticleCard:ee.T,Profile:$.NZ,Sticky:le.Z,Navigator:$.C3},setup(){const e=(0,l.FN)()?.appContext.config.globalProperties,t=(0,te.E)(),a=(0,ae.j)(),i=(0,Q.yj)(),r=(0,Q.tv)(),{t:c}=(0,G.QT)(),s=(0,K.iH)(!0),n=(0,K.iH)(),o=(0,K.qj)({articleId:"",article:"",wordNum:"",readTime:"",commentNum:"",comments:[],images:[],preArticleCard:"",nextArticleCard:"",haveMore:!1,isReload:!1}),d=(0,K.qj)({current:1,size:7});a.type=1,(0,l.bv)((()=>{o.articleId=i.params.articleId,y(),u(),g()})),(0,l.Ah)((()=>{t.resetHeaderImage(),o.article="",se().destroy()})),(0,Q.ao)((e=>{o.article="",o.readTime="",o.wordNum="",o.commentNum="",o.comments=[],o.images=[],o.preArticleCard="",o.nextArticleCard="",o.articleId=e.params.articleId,d.current=1,o.isReload=!0,y(),u(),g()})),(0,l.JJ)("comments",(0,l.Fl)((()=>o.comments))),(0,l.JJ)("haveMore",(0,l.Fl)((()=>o.haveMore))),ne.Z.on("articleFetchComment",(()=>{d.current=1,o.isReload=!0,g()})),ne.Z.on("articleFetchReplies",(e=>{h(e)})),ne.Z.on("articleLoadMore",(()=>{g()}));const m=e=>{(0,oe.e)({images:o.images,index:o.images.indexOf(e)})},p=()=>{let e=n.value.children;if(e.length)for(let l=0;l<e.length;l++){let t=e[l],a=/^H[1-4]{1}$/;a.exec(t.tagName)&&(t.id=l)}se().init({tocSelector:"#toc1",contentSelector:".post-html",headingSelector:"h1, h2, h3",collapseDepth:3,disableTocScrollSync:!0,onClick:function(e){e.preventDefault()}});const t=n.value.getElementsByTagName("img");for(var a=0;a<t.length;a++)o.images.push(t[a].src),t[a].addEventListener("click",(function(e){m(e.target.currentSrc)}))},u=()=>{s.value=!0,de.Z.getArticeById(o.articleId).then((({data:a})=>{if(52003===a.code)return e.$notify({title:"Error",message:"文章密码认证未通过",type:"error"}),void r.push({path:"/出错啦"});null!==a.data?(t.setHeaderImage(a.data.articleCover),new Promise((e=>{a.data.articleContent=(0,me.Z)(a.data.articleContent),e(a.data)})).then((e=>{o.article=e,o.wordNum=Math.round(v(e.articleContent).length/100)/10+"k",o.readTime=Math.round(v(e.articleContent).length/400)+"mins",s.value=!1,(0,l.Y3)((()=>{re().highlightAll(),p()}))})),new Promise((e=>{a.data.preArticleCard.articleContent=(0,me.Z)(a.data.preArticleCard.articleContent).replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,""),e(a.data.preArticleCard)})).then((e=>{o.preArticleCard=e})),new Promise((e=>{a.data.nextArticleCard.articleContent=(0,me.Z)(a.data.nextArticleCard.articleContent).replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,""),e(a.data.nextArticleCard)})).then((e=>{o.nextArticleCard=e}))):r.push({path:"/出错啦"})}))},g=()=>{const e={type:1,topicId:o.articleId,current:d.current,size:d.size};de.Z.getComments(e).then((({data:e})=>{if(null!=e.data.count){o.commentNum=e.data.count;for(let t=0;t<e.data.count;t++)null!=e.data.records[t].replyDTOs&&(o.commentNum+=e.data.records[t].replyDTOs.length)}else o.commentNum=0;o.isReload?(o.comments=e.data.records,o.isReload=!1):o.comments.push(...e.data.records),e.data.count<=o.comments.length?o.haveMore=!1:o.haveMore=!0}))},h=e=>{de.Z.getRepliesByCommentId(o.comments[e].id).then((({data:t})=>{o.comments[e].replyDTOs=t.data}))},w=e=>{""===e&&(e=window.location.href),window.location.href=e},y=()=>{window.scrollTo({top:0})},v=e=>e.replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,"");return{articleRef:n,...(0,K.BK)(o),isMobile:(0,l.Fl)((()=>t.isMobile)),handleAuthorClick:w,loading:s,formatTime:pe.Z,commentNum:(0,l.Fl)((()=>o.commentNum)),t:c}}}),ge=a(40089);const he=(0,ge.Z)(ue,[["render",U],["__scopeId","data-v-1bab5c42"]]);var we=he}}]);