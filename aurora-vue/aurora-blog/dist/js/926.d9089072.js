"use strict";(self["webpackChunkaurora_blog"]=self["webpackChunkaurora_blog"]||[]).push([[926],{85926:function(e,t,n){n.d(t,{s:function(){return Ze}});var a=n(73396);const s={class:"bg-ob-deep-800 p-4 mt-8 lg:px-14 lg:py-10 rounded-2xl shadow-xl mb-8 lg:mb-0",id:"comments"};function o(e,t,n,o,l,r){const i=(0,a.up)("SubTitle"),c=(0,a.up)("CommentForm"),m=(0,a.up)("CommentList");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(i,{title:"titles.comment"},null,8,["title"]),(0,a.Wm)(c),(0,a.Wm)(m)])}var l=n(50913),r=n(49242),i=n(87139);const c=e=>((0,a.dD)("data-v-3c0f05f4"),e=e(),(0,a.Cn)(),e),m={class:"flex space-x-3 xl:space-x-5"},p={class:"comment flex flex-col flex-wrap-reverse w-full max-w-full-calc"},d=["placeholder"],u={class:"justify-between",style:{"text-align":"right"}},g={class:"text-center flex-grow commit"},w=c((()=>(0,a._)("div",{class:"w-full border-b-2 mt-6 wire"},null,-1)));function f(e,t,n,s,o,l){const c=(0,a.up)("Avatar");return(0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(c,{url:e.avatar},null,8,["url"]),(0,a._)("div",p,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.commentContent=t),class:"w-full shadow-md rounded-md p-4 focus:outline-none input",placeholder:e.t("settings.add-comment"),cols:"30",rows:"5"},null,8,d),[[r.nr,e.commentContent]]),(0,a._)("div",u,[(0,a._)("button",{onClick:t[1]||(t[1]=(...t)=>e.saveComment&&e.saveComment(...t)),id:"submit-button",class:"mt-5 w-32 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex float-right"},[(0,a._)("span",g,(0,i.zw)(e.t("settings.sending")),1)])]),w])])}var y=n(44870),h=n(23775),v=n(83560),x=n(22483),C=n(17437),b=n(57619),k=n(73286),_=n(13184),Z=n(35213),I=(0,a.aZ)({name:"CommentItem",components:{SubTitle:l.D,Avatar:h.Z},setup(){const{t:e}=(0,Z.QT)(),t=(0,a.FN)()?.appContext.config.globalProperties,n=(0,v.L)(),s=(0,C.j)(),o=(0,b.q)(),l=(0,x.yj)(),r=(0,y.qj)({commentContent:""}),i=()=>{if(""===n.userInfo)return void t.$notify({title:"Warning",message:"请登录后评论",type:"warning"});if(""==r.commentContent.trim())return void t.$notify({title:"Warning",message:"评论不能为空",type:"warning"});const e=l.path,a=e.split("/"),i={commentContent:r.commentContent,type:s.type};i.topicId=a[2],k.Z.saveComment(i).then((({data:e})=>{if(e.flag){c();let e=o.websiteConfig.isCommentReview;e?t.$notify({title:"Warning",message:"评论成功,正在审核中",type:"warning"}):t.$notify({title:"Success",message:"评论成功",type:"success"}),r.commentContent=""}}))},c=()=>{switch(s.type){case 1:_.Z.emit("articleFetchComment");break;case 2:_.Z.emit("messageFetchComment");break;case 3:_.Z.emit("aboutFetchComment");break;case 4:_.Z.emit("friendLinkFetchComment");break;case 5:_.Z.emit("talkFetchComment")}};return{...(0,y.BK)(r),avatar:(0,a.Fl)((()=>n.userInfo.avatar)),saveComment:i,t:e}}}),D=n(40089);const F=(0,D.Z)(I,[["render",f],["__scopeId","data-v-3c0f05f4"]]);var R=F;const W={key:0,class:"load-more-button mt-7 w-32 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex mx-auto"};function M(e,t,n,s,o,l){const i=(0,a.up)("CommentItem");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r.W3,{name:"fade"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comments,((e,t)=>((0,a.wg)(),(0,a.j4)(i,{key:e.id,comment:e,index:t},null,8,["comment","index"])))),128))])),_:1}),e.haveMore?((0,a.wg)(),(0,a.iD)("button",W,[(0,a._)("span",{class:"text-center flex-grow",onClick:t[0]||(t[0]=(...t)=>e.loadMore&&e.loadMore(...t))},"Load More")])):(0,a.kq)("",!0)],64)}const S=e=>((0,a.dD)("data-v-a73f080c"),e=e(),(0,a.Cn)(),e),T={class:"mt-5 max-w-full"},U={class:"flex space-x-3 xl:space-x-5"},j={class:"max-w-full-calc space-y-5"},z={class:"bg-white text-primary p-4 rounded-md relative shadow-md reply",style:{width:"fit-content"}},L={class:"text-xs"},$={key:0,class:"author-style text-xs"},A=["innerHTML"],q={class:"flex justify-between mt-2 text-xs text-gray-400 space-x-3 md:space-x-16"},H={class:"svg-icon message-svg message-svg","aria-hidden":"true",style:{width:"1.5em",height:"1.5em",display:"inline-block",stroke:"rgba(255, 255, 255, var(--tw-text-opacity))"},"data-v-c8a70580":"","data-v-7b23b1e6":""},K=S((()=>(0,a._)("use",{href:"#icon-message","data-v-c8a70580":""},null,-1))),O=[K];function B(e,t,n,s,o,l){const c=(0,a.up)("Avatar"),m=(0,a.up)("CommentReplyForm"),p=(0,a.up)("CommentReplyItem");return(0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("div",U,[(0,a.Wm)(c,{url:e.comment.avatar},null,8,["url"]),(0,a._)("div",j,[(0,a._)("div",z,[(0,a._)("span",L,[(0,a.Uk)((0,i.zw)(e.comment.nickname),1),1==e.comment.userId?((0,a.wg)(),(0,a.iD)("span",$,"【"+(0,i.zw)(e.t("settings.author"))+"】",1)):(0,a.kq)("",!0)]),(0,a._)("p",{class:"commentContent",innerHTML:e.comment.commentContent.replaceAll("\n","<br>")},null,8,A),(0,a._)("div",q,[(0,a._)("div",null,[(0,a._)("span",null,(0,i.zw)(new Date(e.time).getFullYear())+" "+(0,i.zw)(e.t(`settings.months[${new Date(e.time).getMonth()}]`))+" "+(0,i.zw)(new Date(e.time).getDate())+", "+(0,i.zw)(e.formatTime(e.time)),1),(0,a._)("span",{onClick:t[0]||(t[0]=(...t)=>e.clickOnReply&&e.clickOnReply(...t)),class:"cursor-pointer reply-button"},[((0,a.wg)(),(0,a.iD)("svg",H,O)),(0,a.Uk)(" "+(0,i.zw)(e.t("settings.reply")),1)])])])]),(0,a.wy)((0,a.Wm)(m,{replyUserId:e.comment.userId,initialContent:e.replyContent,onChangeShow:e.changeShow},null,8,["replyUserId","initialContent","onChangeShow"]),[[r.F8,e.show]]),(0,a.Wm)(r.W3,{name:"fade"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comment.replyDTOs,(t=>((0,a.wg)(),(0,a.j4)(p,{key:t.id,reply:t,commentUserId:e.comment.userId},null,8,["reply","commentUserId"])))),128))])),_:1})])])])}const Y=e=>((0,a.dD)("data-v-802df206"),e=e(),(0,a.Cn)(),e),J={class:"flex space-x-3 xl:space-x-5"},Q={class:"reply bg-white flex flex-col p-3 rounded-md relative shadow-md"},N={class:"text-xs"},P={key:0,class:"author-style"},V=["innerHTML"],E={class:"flex justify-between mt-2 text-xs text-gray-400 space-x-3 md:space-x-16"},G={class:"svg-icon message-svg message-svg",style:{width:"1.5em",height:"1.5em",display:"inline-block",stroke:"rgba(255, 255, 255, var(--tw-text-opacity))"},"aria-hidden":"true","data-v-c8a70580":"","data-v-7b23b1e6":""},X=Y((()=>(0,a._)("use",{href:"#icon-message","data-v-c8a70580":""},null,-1))),ee=[X],te=Y((()=>(0,a._)("a",{href:"",target:"_blank"},null,-1)));function ne(e,t,n,s,o,l){const c=(0,a.up)("Avatar"),m=(0,a.up)("CommentReplyForm");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",J,[(0,a.Wm)(c,{url:e.reply.avatar},null,8,["url"]),(0,a._)("div",Q,[(0,a._)("span",N,[(0,a.Uk)((0,i.zw)(e.reply.nickname)+" ",1),1==e.reply.userId?((0,a.wg)(),(0,a.iD)("span",P,"【"+(0,i.zw)(e.t("settings.author"))+"】",1)):(0,a.kq)("",!0)]),(0,a._)("p",{class:"commentContent",innerHTML:e.commentContent.replaceAll("\n","<br>")},null,8,V),(0,a._)("div",E,[(0,a._)("div",null,[(0,a._)("span",null,(0,i.zw)(new Date(e.time).getFullYear())+" "+(0,i.zw)(e.t(`settings.months[${new Date(e.time).getMonth()}]`))+" "+(0,i.zw)(new Date(e.time).getDate())+", "+(0,i.zw)(e.formatTime(e.time)),1),(0,a._)("span",{onClick:t[0]||(t[0]=(...t)=>e.clickOnSonReply&&e.clickOnSonReply(...t)),class:"cursor-pointer reply-button"},[((0,a.wg)(),(0,a.iD)("svg",G,ee)),(0,a.Uk)(" "+(0,i.zw)(e.t("settings.reply")),1)])])])])]),te,(0,a.wy)((0,a.Wm)(m,{class:"mt-5",replyUserId:e.reply.userId,initialContent:e.replyContent,onChangeShow:e.changeShow},null,8,["replyUserId","initialContent","onChangeShow"]),[[r.F8,e.show]])])}const ae={class:"flex space-x-3 xl:space-x-5"},se={class:"reply flex flex-col flex-wrap-reverse w-full max-w-full-calc",style:{width:"fit-content"}},oe=["placeholder"],le={class:"justify-between",style:{"text-align":"right"}},re={class:"text-center flex-grow commit"},ie={class:"text-center flex-grow commit"};function ce(e,t,n,s,o,l){const c=(0,a.up)("Avatar");return(0,a.wg)(),(0,a.iD)("div",ae,[(0,a.Wm)(c,{url:e.avatar},null,8,["url"]),(0,a._)("div",se,[(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.commentContent=t),class:"w-full shadow-md rounded-md p-4 focus:outline-none input",placeholder:e.initialContent,cols:"30",rows:"5"},null,8,oe),[[r.nr,e.commentContent]]),(0,a._)("div",le,[(0,a._)("button",{onClick:t[1]||(t[1]=(...t)=>e.saveReply&&e.saveReply(...t)),id:"submit-button",class:"mt-5 w-16 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex float-right"},[(0,a._)("span",re,(0,i.zw)(e.t("settings.reply")),1)]),(0,a._)("button",{onClick:t[2]||(t[2]=(...t)=>e.CancelReply&&e.CancelReply(...t)),id:"submit-button",class:"mt-5 mr-3 w-16 text-white p-2 rounded-lg shadow-lg transition transform hover:scale-105 flex float-right"},[(0,a._)("span",ie,(0,i.zw)(e.t("settings.cancel")),1)])])])])}var me=(0,a.aZ)({components:{Avatar:h.Z},props:["replyUserId","initialContent"],setup(e,{emit:t}){const{t:n}=(0,Z.QT)(),s=(0,a.FN)()?.appContext.config.globalProperties,o=(0,v.L)(),l=(0,C.j)(),r=(0,b.q)(),i=(0,x.yj)(),c=(0,y.qj)({commentContent:""}),m=(0,a.f3)("parentId"),p=(0,a.f3)("index"),d=()=>{if(""===o.userInfo)return void s.$notify({title:"Warning",message:"请登录后回复",type:"warning"});if(""==c.commentContent.trim())return void s.$notify({title:"Warning",message:"回复不能为空",type:"warning"});const n=i.path,a=n.split("/"),p={type:l.type,replyUserId:e.replyUserId,parentId:m,commentContent:c.commentContent};p.topicId=a[2],k.Z.saveComment(p).then((({data:e})=>{if(e.flag){t("changeShow"),u();let e=r.websiteConfig.isCommentReview;e?s.$notify({title:"Warning",message:"评论成功,正在审核中",type:"warning"}):s.$notify({title:"Success",message:"回复成功",type:"success"}),c.commentContent=""}}))},u=async()=>{switch(l.type){case 1:_.Z.emit("articleFetchReplies",p);break;case 2:_.Z.emit("messageFetchReplies",p);break;case 3:_.Z.emit("aboutFetchReplies",p);break;case 4:_.Z.emit("friendLinkFetchReplies",p);break;case 5:_.Z.emit("talkFetchReplies",p)}},g=()=>{t("changeShow")};return{...(0,y.BK)(c),avatar:(0,a.Fl)((()=>o.userInfo.avatar)),saveReply:d,CancelReply:g,t:n}}});const pe=(0,D.Z)(me,[["render",ce],["__scopeId","data-v-e3cb75de"]]);var de=pe,ue=n(49252),ge=(0,a.aZ)({components:{Avatar:h.Z,CommentReplyForm:de},props:["reply","commentUserId"],setup(e){const{t:t}=(0,Z.QT)(),n=(0,y.qj)({replyContent:"",time:e.reply.createTime,show:!1}),s=()=>{n.replyContent="@"+e.reply.nickname,n.show=!0},o=()=>{n.show=!1},l=(0,a.Fl)((()=>e.reply.replyUserId!==e.commentUserId?`<a href="${e.reply.replyWebsite}" target="_blank" class="reply-link">@${e.reply.replyNickname}&nbsp</a>`+e.reply.commentContent:e.reply.commentContent));return{...(0,y.BK)(n),commentContent:l,clickOnSonReply:s,changeShow:o,formatTime:ue.Z,t:t}}});const we=(0,D.Z)(ge,[["render",ne],["__scopeId","data-v-802df206"]]);var fe=we,ye=(0,a.aZ)({components:{Avatar:h.Z,CommentReplyItem:fe,CommentReplyForm:de},props:["comment","index"],setup(e){const{t:t}=(0,Z.QT)(),n=e.comment;(0,a.JJ)("parentId",n.id),(0,a.JJ)("index",e.index);const s=(0,y.qj)({replyContent:"",time:e.comment.createTime,show:!1}),o=()=>{s.show=!1},l=()=>{s.replyContent="@"+e.comment.nickname,s.show=!0};return{...(0,y.BK)(s),clickOnReply:l,changeShow:o,formatTime:ue.Z,t:t}}});const he=(0,D.Z)(ye,[["render",B],["__scopeId","data-v-a73f080c"]]);var ve=he,xe=(0,a.aZ)({components:{CommentItem:ve},setup(){const e=(0,C.j)(),t=async()=>{switch(e.type){case 1:_.Z.emit("articleLoadMore");break;case 2:_.Z.emit("messageLoadMore");break;case 3:_.Z.emit("aboutLoadMore");break;case 4:_.Z.emit("friendLinkLoadMore");break;case 5:_.Z.emit("talkLoadMore")}};return{comments:(0,a.f3)("comments"),haveMore:(0,a.f3)("haveMore"),loadMore:t}}});const Ce=(0,D.Z)(xe,[["render",M],["__scopeId","data-v-0547f9c6"]]);var be=Ce,ke=(0,a.aZ)({name:"Comment",components:{SubTitle:l.D,CommentForm:R,CommentList:be},setup(){return{}}});const _e=(0,D.Z)(ke,[["render",o]]);var Ze=_e},49252:function(e,t){const n=e=>{let t=a(new Date(e).getHours()),n=a(new Date(e).getMinutes()),s=a(new Date(e).getSeconds());return t+":"+n+":"+s},a=e=>e<10?`0${e}`:e;t["Z"]=n},23775:function(e,t,n){n.d(t,{Z:function(){return g}});var a=n(73396);const s={class:"flex-shrink-0"},o={class:"rounded-full ring-gray-100 overflow-hidden shaodw-lg w-9 xl:w-10"},l=["src"],r=["src"];function i(e,t,n,i,c,m){return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",o,[null!=e.url?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"avatar-img",src:e.url,alt:""},null,8,l)):((0,a.wg)(),(0,a.iD)("img",{key:1,class:"avatar-img",src:e.default,alt:""},null,8,r))])])}var c=n(44870),m=n(57619),p=(0,a.aZ)({name:"Avatar",props:["url"],setup(e){const t=(0,m.q)();return{url:(0,c.BK)(e).url,default:(0,a.Fl)((()=>t.websiteConfig.touristAvatar||"https://static.linhaojun.top/aurora/config/52a81cd2772167b645569342e81ce312.jpg"))}}}),d=n(40089);const u=(0,d.Z)(p,[["render",i],["__scopeId","data-v-25b9934c"]]);var g=u}}]);